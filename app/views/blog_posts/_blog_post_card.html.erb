<div class="card-trip">
  <div class="blogpost-header">
    <div>
      <h2><%= blog_post.title %></h2>
      <p class="blogpost-gametag">Posted by: <%= blog_post.user.gametag %>
        <% if  blog_post.user.master %>
          <span class="admin-badge">Admin</span>
        <% end %>
      </p>
    </div>

    <div class="">
      <% if current_user %>
        <div class="loggedBlogLike">
          <%= link_to blog_like_path(blog_post) do %>
            <%# pre_like = blog_post.blog_likes.find { |like| like.user_id == current_user.id} %>
            <p class="blog-likes-count"><%= blog_post.blog_likes.count %></p>
            <i class="far fa-heart"></i>
          <% end %>
        </div>
      <% else %>
        <div class="unLoggedBlogLikeAttempt">
          <p class="blog-likes-count"><%= blog_post.blog_likes.count %></p>
          <i class="far fa-heart"></i>
        </div>
      <% end %>
    </div>
  </div>

  <p class="textToAutoLink"><%= blog_post.content %></p>

  <div class="gif-image-content">
    <% if blog_post.content.match(/\bhttp.+\.gif\b/) %>
      <div class="">
        <%= image_tag blog_post.content.match(/\bhttp.+\.gif\b/)[0], width: 160, alt: "A GIF" %>
      </div>
    <% end %>

    <% if blog_post.blog_image.attached? %>
      <div class="">
        <% if blog_post.blog_image.blob.image? %>
          <%= cl_image_tag blog_post.blog_image.key, width: 150 %>
        <% elsif blog_post.blog_image.blob.video? %>
          <%= cl_video_tag blog_post.blog_image.key, width: 200, height: 150, crop: :pad, controls: true %>
        <% end %>
      </div>
    <% end %>
  </div>

  <% if current_user %>
    <% if policy(blog_post).edit? %>
        <%= link_to edit_blog_post_path(blog_post) do %>
          <i class="far fa-edit"></i>
        <% end %>
    <% end %>

    <% if policy(blog_post).destroy? %>
        <%= link_to blog_post_path(blog_post),
          method: 'delete',
          data: { confirm: "Are you sure you want to delete #{blog_post.title}?" } do
        %>
          <i class="fas fa-dumpster"></i>
        <% end %>
    <% end %>
  <% end %>

</div>
